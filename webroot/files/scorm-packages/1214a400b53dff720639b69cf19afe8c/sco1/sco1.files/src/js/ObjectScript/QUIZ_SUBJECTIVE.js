define("QUIZ_SUBJECTIVE",["CScript","BitmapAsset","Rectangle","CQuiz_Manager","CQuizInfo","Shape","TextFormat"],function(b,g,c,f,h,e,a){function d(C,m,p,s,al,aj,W,Z,T,ad,D,l,I,ai,H,ak,ao,an,j,u,ah,ac,ab,Y,O,o,aa,ap,M,am,V,S,x,Q,v,G,A,k,z,i,n,N,B,y,F,J,q,L,r,E,ag,X,U,R,w,P,t,K,ae){this.iQuizNo=C||1;this.iQuizType=m||0;this.sID=p||null;this.iLoop=s||1;this.iDisplayAnswer=al==0?0:(al||1);this.correctSoundAsset=aj||null;this.incorrectSoundAsset=W||null;this.iDisplayMessage=Z||0;this.sCorrectMessage=T||"";this.sIncorrectMessage=ad||"";if(this.iDisplayMessage==0){this.sCorrectMessage="";this.sIncorrectMessage=""}if(this.iDisplayMessage==1){this.sIncorrectMessage=""}if(this.iDisplayMessage==2){this.sCorrectMessage=""}this.iCorrectAction=D||0;this.iIncorrectAction=l||0;this.sCorrectSub=I||"";this.sIncorrectSub=ai||"";this.sButtonName=H||"";this.sButtonFontMacro=ak||"";this.iButtonX=ao||0;this.iButtonY=an||0;this.iButtonWidth=j||80;this.iButtonHeight=u||32;this.iButtonType=ah||0;this.iButtonColor1=(ac==0)?0:ac||-1;this.iButtonColor2=(ab==0)?0:ab||-1;this.iButtonColor3=(Y==0)?0:Y||-1;this.button1BitmapAsset=O||null;this.button2BitmapAsset=o||null;this.button3BitmapAsset=aa||null;this.sAnswer=ap||"";this.sAnswerFontMacro=M||"";this.iDecisionType=am||0;this.iTextType=V||-1;this.iX1=S||100;this.iY1=x||100;this.iX2=Q||200;this.iY2=v||160;this.bodyTextBitmapAsset=G||null;this.iAX1=A||100;this.iAY1=k||100;this.iAX2=z||200;this.iAY2=i||160;this.answerBitmapAsset=n||null;this.iPoint=N||1;this.iShowPoint=B||0;this.iRetry=y||0;this.bQuizNumber=F||0;this.iQuizNumber=J||-1;this.sRetryMessage=q||"";this.iRetryAction=L||0;this.sRetrySub=r||"";this.retrySoundAsset=E||null;this.bExplain=ag||0;this.iDisplayExplain=X||0;this.explainTextBitmapAsset=U||null;this.iPX1=R||0;this.iPY1=w||0;this.iPX2=P||0;this.iPY2=t||0;this.iInTime=K||-1;this.iOutTime=ae||Number.MAX_VALUE;this.buttonFormat=CTextFormatUtil.parseFontMacro(this.sButtonFontMacro,"center","center");this.answerFormat=CTextFormatUtil.parseFontMacro(this.sAnswerFontMacro,"left");if(this.answerFormat.kerning==true){this.sAnswer=CUIComponentFactory.String2RTL(ap)}var af=null;if(this.bodyTextBitmapAsset){}if(this.answerBitmapAsset){}}d.prototype=new b();d.prototype.Run=function(D){D=D||false;var j=this.sID==null?"":this.sID.toString();this.iSyncObject=this.CheckSyncObject(D,"QUIZ_SUBJECTIVE",j,this.iInTime,this.iOutTime);if(this.iScriptIndex>=0){this.iIndex=this.iScriptIndex}if(this.iSyncObject==-1){return}if(this.bQuizNumber){var q;if(this.answerFormat.kerning==true){q="."+this.iQuizNumber.toString()}else{q=this.iQuizNumber.toString()+"."}var t=CTextFormatUtil.GetFontPointSize(parseInt(this.answerFormat.size),this.answerFormat,q);var k=new c();k.top=this.iY1;k.bottom=this.iY2;if(this.answerFormat.kerning==true){k.left=this.iX2+8;k.right=k.left+(t.x>16?t.x:16)+4}else{k.right=this.iX1-8;k.left=k.right-(t.x>16?t.x:16)-4}var n=new e(k.GetX(),k.GetY(),k.GetWidth(),k.GetHeight());if(this.sID){n.setID("quiz sbjt "+this.sID)}CUIComponentFactory.Text(n,q,k,this.answerFormat,null,false);main.Draw(n)}if(this.bodyTextBitmapAsset){var n=CUIComponentFactory.DrawBitmap(this.bodyTextBitmapAsset.bitmapData,this.iX1,this.iY1,this.iX2-this.iX1,this.iY2-this.iY1);if(this.sID){n.setID("quiz sbjt "+this.sID)}main.Draw(n)}if(this.iShowPoint){var l;var u=Capabilities.Message(Capabilities.Langueges.QuizPoint);l="[ "+u+" : "+this.iPoint.toString()+" ]";var m=new c(this.iX1,this.iY2+8,this.iX2-this.iX1,Number(this.answerFormat.size)+4);var x=new a();var A=this.answerFormat.align;x=this.answerFormat;if(x.kerning==false){x.align="right"}else{x.align="left"}var n=new e(m.left,m.top,m.width,m.height);if(this.sID){n.setID("quiz sbjt "+this.sID)}CUIComponentFactory.Text(n,l,m,x,null,false);main.Draw(n);this.answerFormat.align=A}var C=main.quiz_Manager;var o;o=C.FindQuiz_Info(this.iQuizNo);var E=false;if(o&&main.bRunMaster){E=true}if(!o){o=C.AddQuiz(j,this.iQuizNo,this.iPoint,this.iRetry,this.iQuizNumber)}var v;if(o.GetPassed()==-1){for(v=0;v<main.quizNumber.length;v++){if(main.quizNumber[v]==this.iQuizNumber){switch(main.quizResult[v]){case"1":o.SetPassed(1);break;case"0":o.SetPassed(0);break;case"-":o.SetPassed(-1);break}break}}}var r=main.quizManager;var p;if(E){p=r.FindQuizIndex(o.strID);var s=r.GetQuizInfo(p);if(s){s.SetPassed(-1);s.SetSubmitCount(0)}else{o.SetPassed(-1);E=false}}var z=(this.iRetry==1)&&(o.GetPassed()!=-1);if(!E){p=r.AddQuiz(o,this.iQuizType,this.iLoop,this.iDisplayAnswer,this.correctSoundAsset,this.incorrectSoundAsset,this.sCorrectMessage,this.sIncorrectMessage,this.iCorrectAction,this.iIncorrectAction,this.sCorrectSub,this.sIncorrectSub,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,this.sAnswer,this.iDecisionType,this.answerFormat,j,this.iQuizNumber,this.sRetryMessage,this.iRetryAction,this.sRetrySub,this.retrySoundAsset,this.iDisplayExplain,this.explainTextBitmapAsset,new c(this.iPX1,this.iPY1,this.iPX2-this.iPX1,this.iPY2-this.iPY1))}var B=new c(this.iAX1,this.iAY1,this.iAX2-this.iAX1,this.iAY2-this.iAY1);var y=r.AddTextArea(p,this.iAX1,this.iAY1,this.iAX2-this.iAX1,this.iAY2-this.iAY1);if(this.sID){y.setID("quiz sbjt "+this.sID)}main.AddTextArea(y,j);main.Draw(y);if(!z){B=new c(this.iButtonX,this.iButtonY,this.iButtonWidth,this.iButtonHeight);var w;w=main.GetFreeButtonNo(60000);if(this.iButtonType==0||this.iButtonType==1||this.iButtonType==4){main.AddButton(w,this.sButtonName,B,this.iButtonColor1,this.iButtonColor2,this.iButtonColor3,this.iButtonType==4?2:this.iButtonType,"",21,"",this.sButtonFontMacro,null,0,this.buttonFormat,p,-1,-1,-1,-1,-1,-1,"")}else{main.AddButton(w,this.sButtonName,B,this.button1BitmapAsset,this.button2BitmapAsset,this.button3BitmapAsset,this.iButtonType,"",21,"",this.sButtonFontMacro,null,0,this.buttonFormat,p,-1,-1,-1,-1,-1,-1,"")}main.GetButtonInfo(w).DrawOut();if(this.sID){main.GetButtonInfo(w).setID("quiz sbjt "+this.sID)}}if(this.bExplain&&(this.iDisplayExplain&8)){if(this.explainTextBitmapAsset){var n=CUIComponentFactory.DrawBitmap(this.explainTextBitmapAsset.bitmapData,this.iPX1,this.iPY1,this.iPX2-this.iPX1,this.iPY2-this.iPY1);if(this.sID){n.setID("quiz objt "+this.sID)}main.Draw(n);r.SetAlredyDisplayExplain(p,true)}}if(main.bFullScreen){main.QuizManager.ShowWindow(false)}};return d});