define("DSHAPE",["CScript","CStopTypeAfterNSec","CStopTypeInfiniteLoop","BitmapAsset","CEffectMacro","AnimationPackage","Rectangle"],function(c,b,e,f,h,g,d){function a(E,C,z,w,o,t,s,r,n,y,x,j,l,q,m,u,k,B,v,A,i,D,p){this.object=E;this.iX=C;this.iY=z;this.iWidth=w||-1;this.iHeight=o||-1;this.iDisplayType=t||0;this.sEffectMacro=s||"";this.uTransparentColor=r||0;this.iNoUse1=n||0;this.iCropX=y||0;this.iCropY=x||0;this.iCropWidth=j||-1;this.iCropHeight=l||-1;this.EdgeStyle=q||"";this.iEdgeWidth=m||0;this.uEdgeColor=u||0;this.sHyperLink=k||"";this.sHyperLinkToolTip=B||"";this.disappear=v||0;this.disappearGroupID=A||-1;this.sID=i||"";this.iInTime=D||-1;this.iOutTime=p||Number.MAX_VALUE;this.iSyncObject=0;this.iIndex=0;this.EM=new h();this.EM.parseEffectMacro(this.sEffectMacro)}a.prototype=new c();a.prototype.StopType=function(){if(typeof this.object=="string"){return new e()}if(this.EM.IsAnimation()){return new b(0)}return null};a.prototype.onLoadComplete=function(j){var i=this.me;i.bitmapAsset=new f(i.Image);if(main.GetCurrentSlideNo()==i.iCurrentSlideNo){i.Display();i.Resume()}};a.prototype.onLoadError=function(j){var i=this.me;i.Resume()};a.prototype.Run=function(i){i=i||false;this.iSyncObject=this.CheckSyncObject(i,"DSHAPE",this.sID,this.iInTime,this.iOutTime);if(this.iScriptIndex>=0){this.iIndex=this.iScriptIndex}if(this.iSyncObject==-1){return}if(typeof this.object=="string"){this.iCurrentSlideNo=main.GetCurrentSlideNo();this.Image=document.createElement("img");this.Image.me=this;this.Image.onload=this.onLoadComplete;this.Image.src=this.object}else{this.bitmapAsset=this.object;this.Display()}};a.prototype.Display=function(){if(!this.bitmapAsset||!this.bitmapAsset.bitmapData){return}if(this.iWidth==-1){this.iWidth=this.bitmapAsset.bitmapData.width||this.bitmapAsset.bitmapData.naturalWidth}if(this.iHeight==-1){this.iHeight=this.bitmapAsset.bitmapData.height||this.bitmapAsset.bitmapData.naturalHeight}var j=CUIComponentFactory.DrawBitmap(this.bitmapAsset.bitmapData,this.iX,this.iY,this.iWidth,this.iHeight);if(this.sID){j.setID(this.sID)}main.Draw(j);if(this.disappear==1){var i=main.GetFreeButtonNo(10000);main.AddBitmapCloseButton(j,this.sID,i,this.disappearGroupID);j.addStyle("cursor","pointer");j.addStyle("cursor","cursor");j.addEvent("onclick","main.RemoveBitmapClose(this, "+i+", "+this.disappearGroupID+")")}if(this.EdgeStyle instanceof f){CUIComponentFactory.ImageBox(this.iX,this.iY,this.iX+this.iWidth,this.iY+this.iHeight,this.iEdgeWidth,this.EdgeStyle)}else{if(this.EdgeStyle==0){if(this.iEdgeWidth){CUIComponentFactory.DrawRectangle3(j,this.iEdgeWidth,this.uEdgeColor)}}else{if(Viewer.isIE){CUIComponentFactory.DrawRectangle3(j,this.iEdgeWidth,this.uEdgeColor,"dashed")}else{CUIComponentFactory.DrawRectangle4(j,this.iEdgeWidth,this.uEdgeColor,this.EdgeStyle)}}}if(this.sHyperLink.length>0){j.addHyperLink(this.sHyperLink,this.sHyperLinkToolTip)}if(this.sEffectMacro.length>0){if(this.EM.IsAnimation()){if(!this.sID){j.setID("E"+j.zIndex)}var k=new g(j.divShape);k.setmacro(this.sEffectMacro.split(","));k.setcontainer();k.start()}}};return a});