define("EBOARD",["CScript","Rectangle","Point","CCommonUtil"],function(b,c,e,d){function a(f,u,w,n,v,h,o,t,p,g,s,r,l,q,k,j,i,x,m){this.sID=f;this.arrayEBoardAction=u;this.MediaFile=w||null;this.iControlType=n==0?0:n||-1;this.iControlPannel=v==0?0:v||-1;this.iPlayLoop=h==0?0:h||-1;this.nPlayStartTime=o==0?0:o||-1;this.nPlayStopTime=t==0?0:t||-1;this.iVideoMode=p||0;this.iVideoControlPannel=g||0;this.rectangleVideo=new c(s||0,r||0,l||0,q||0);this.pointControlPanel=new e(k||-1,j||-1);this.iShiftTime=i||0;this.iInTime=x||-1;this.iOutTime=m||Number.MAXVALUE}a.prototype=new b();a.prototype.Run=function(i){i=i||false;if(this.pointControlPanel.x==-1){this.pointControlPanel.x=32}else{if(this.pointControlPanel.x==-2){this.pointControlPanel.x=Viewer.Slidewidth-338-32}}if(this.pointControlPanel.y==-1||this.pointControlPanel.y==-2){this.pointControlPanel.y=Viewer.SlideHeight-38}var f=this.sID==null?"":this.sID.toString();if(this.sID!=null&&typeof(this.sID)=="string"){this.iID=main.FindEBoardNo(f)}else{this.iID=Number(this.sID)}var j;if(this.iID==-1){j=main.GetFreeEBoardNo(0)}else{j=this.iID}this.iSyncObject=this.CheckSyncObject(i,"EBOARD",f,this.iInTime,this.iOutTime);if(this.iScriptIndex>=0){this.iIndex=this.iScriptIndex}if(this.iSyncObject==-1){return}if(this.iSyncObject){var g=new c(0,0,main.iSlideWidth,main.iSlideHeight);main.AddBitmapSync(g,this.iIndex,f)}if(this.arrayEBoardAction||this.MediaFile){main.CloseEBoard();if(f!=""){main.AddBitmapClose(new c(0,0,1,1),-1,f,"EBOARD")}j=main.GetFreeEBoardNo(0);main.AddEBoard(j,this.arrayEBoardAction,this.iControlPannel,this.pointControlPanel,this.iShiftTime,this.MediaFile,this.iVideoControlPannel,this.rectangleVideo,this.iPlayLoop,f)}else{if(this.iID!=-1){var h=main.FindEBoard(this.iID);if(h!=null){switch(this.iControlType){case 0:h.Resume();break;case 1:h.Pause();break;case 2:h.Stop();break;case 3:h.Close();h.Delete();break}}}}};return a});