define("CEBoardActionElectronicBoardPoly",["CEBoardActionElectronicBoard","Shape"],function(b,c){function a(g,d,f,h,e,i){b.call(this,g,d,f,h);this.polyType=e;this.arrayPoint=i;this.iSpeed=7;this.nPauseStartTime=0}a.prototype=new b();a.prototype.Act=function(h,g){this.eboardInfo=g;CAssertUtil.IsTrue(2<this.arrayPoint.length);if(h){if(this.MSec()==this.StartSec()){this.nCountPerMSec=this.arrayPoint.length/100}else{this.nCountPerMSec=this.arrayPoint.length/(this.MSec()-this.StartSec())}var e=(this.MSec()-this.StartSec())/this.arrayPoint.length;this.shape=this.CreateEBoardShape();this.shape.graphics.lineStyle(this.iLineWidth,this.uColor,0);main.DrawEBoardItem(this.shape,g.sID);this.nCount=0;this.timer=Timer.New(e);this.timer.addEventListener(this.timerHandler);this.timer.me=this;this.timer.start();this.nStartTime=new Date().getTime()}else{this.shape=this.CreateEBoardShape();this.shape.graphics.lineStyle(this.iLineWidth,this.uColor,0);for(var f=1;f<this.arrayPoint.length;f++){var d=this.arrayPoint[f];if(this.arrayPoint[f-1].x==d.x&&this.arrayPoint[f-1].y==d.y){continue}this.drawLine(this,this.arrayPoint[f-1].x,this.arrayPoint[f-1].y,d.x,d.y)}main.DrawEBoardItem(this.shape,g.sID)}};a.prototype.CreateEBoardShape=function(){var d=new c(0,0,Viewer.SlideWidth,Viewer.SlideHeight,true);if(d){d.divShape.className=(d.divShape.className==undefined)?"EBoardItem":d.divShape.className+" EBoardItem"}if(this.polyType==EPolyType.PolylineBright){d.addStyle("filter","alpha(opacity=50)");d.addStyle("opacity","0.5")}return d};a.prototype.timerHandler=function(j){var h=this.me;if(h.eboardInfo.Status()==4){if(h.timer){h.timer.stop();h.timer.removeEventListener();h.timer=null}return}var f=h.nCountPerMSec*h.GetElapsedTime();for(var g=h.nCount;g<f;g++){if(g>=h.arrayPoint.length){if(h.timer){h.timer.stop()}break}var d=h.arrayPoint[g];if(g!=0){if(h.arrayPoint[g-1].x==d.x&&h.arrayPoint[g-1].y==d.y){h.nCount++;continue}h.drawLine(h,h.arrayPoint[g-1].x,h.arrayPoint[g-1].y,d.x,d.y)}h.nCount++}};a.prototype.drawLine=function(h,e,g,d,f){h.shape.graphics.moveTo(e,g);h.shape.graphics.lineTo(d,f);h.shape.graphics.draw();h.shape.graphics.closePath()};a.prototype.Start=function(){if(this.timer){this.timer.start()}if(this.nPauseStartTime>0){this.nStartTime+=(new Date().getTime()-this.nPauseStartTime);this.nPauseStartTime=0}};a.prototype.Pause=function(){if(this.timer){this.timer.stop()}this.nPauseStartTime=new Date().getTime()};a.prototype.Stop=function(){if(this.timer){this.timer.stop();this.timer.removeEventListener();this.nPauseStartTime=0}};a.prototype.GetElapsedTime=function(){return new Date().getTime()-this.nStartTime};return a});