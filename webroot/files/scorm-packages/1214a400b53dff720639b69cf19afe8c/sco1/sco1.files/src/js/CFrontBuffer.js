define("CFrontBuffer",["CColorUtil"],function(b){function a(f,e,c,d){this.uBackgroundColor=c}a.prototype={bitmapFrontBuffer:null,uBackgroundColor:0,SlideStart:function(d){var c=document.getElementById("imageCanvas");c.style.backgroundColor="";c.style.backgroundImage="";c.style.backgroundSize="";if(b.RGBColor(d)!="#ffffff"){c.style.backgroundColor=b.RGBColor(d)}},Clear:function(c){var d=document.getElementById("imageCanvas");if(d){if(c){if(d.contains(c.divShape||c.divDisplay||c)){d.removeChild(c.divShape||c.divDisplay||c)}}else{var f=d.querySelectorAll(".item.image");if(f.length){for(var e=0;e<f.length;e++){if(f[e].parentNode==d){if(d.contains(f[e])){d.removeChild(f[e])}}}}}}},ClearEBoardItem:function(c){var d=document.getElementById("EBoard");if(d){if(c){if(c.className){if(c.className.indexOf("item list")==-1){if(d.contains(c.divShape||c.divDisplay||c)){d.removeChild(c.divShape||c.divDisplay||c)}}}}else{var f=d.querySelectorAll(".EBoardItem");if(f.length){for(var e=f.length-1;e>-1;--e){if(d.contains(f[e])){d.removeChild(f[e])}}}}}},Draw:function(c){if(c){var d=document.getElementById("imageCanvas");if(d){d.appendChild(c.divShape||c.divDisplay||c)}}},AddEBoardControlPanel:function(c){if(c){var d=document.getElementById("imageCanvas");if(d){d.appendChild(c.divShape||c.divDisplay||c)}}},ShowEBoardControlPanel:function(){var c=document.getElementById("eBoardControlPanel");if(c){c.style.display="block"}},HideEBoardControlPanel:function(){var c=document.getElementById("eBoardControlPanel");if(c){c.style.display="none"}},DrawEBoardItem:function(d,e){if(d){var c=document.getElementById("EBoard");if(!c){c=document.createElement("div");c.id="EBoard";c.className="item image eboard "+e;c.style.left="0px";c.style.top="0px";c.style.width=Viewer.SlideWidth+"px";c.style.height=Viewer.SlideHeight+"px";c.style.zIndex=30000;document.getElementById("imageCanvas").appendChild(c)}c.appendChild(d.divShape||d.divDisplay||d)}},FloodFill:function(c,i,e,g,h,f,d){},GetBitmapData:function(f){var d=document.getElementById("imageCanvas");var c=new Array();if(d&&f){var g=d.querySelectorAll(".item.image");if(g.length){var h=f.clone();h.inflate(10,10);for(var e=0;e<g.length;e++){if(g[e].parentNode==d){if(this.CheckRectangle(h,g[e])){c.push(g[e])}}}}}return c},ClearBitmapData:function(e){var c=document.getElementById("imageCanvas");if(c&&e){var f=c.querySelectorAll(".item.image");if(f.length){var g=e.clone();g.inflate(10,10);for(var d=0;d<f.length;d++){if(f[d].parentNode==c){if(this.CheckRectangle(g,f[d])){this.Clear(f[d])}}}}}},CheckRectangle:function(e,h){if(h.style.zIndex>=10000){return false}var g=parseInt(h.style.left);var f=parseInt(h.style.top);var d=parseInt(h.style.left)+parseInt(h.style.width);var c=parseInt(h.style.top)+parseInt(h.style.height);return((e.left<g)&&(e.right>d)&&(e.top<f)&&(e.bottom>c))},Contains:function(d){var c=document.getElementById("imageCanvas");return c.contains(d.divShape||d.divDisplay||d)},ShowWaterMark:function(){if(Viewer._WaterMark_.bitmapData){var g=document.createElement("div");var f=Viewer._WaterMark_.width||Viewer._WaterMark_.bitmapData.width||Viewer._WaterMark_.bitmapData.naturalWidth;var c=Viewer._WaterMark_.height||Viewer._WaterMark_.bitmapData.height||Viewer._WaterMark_.bitmapData.naturalHeight;g.className="item trial";g.style.left=(Viewer.SlideWidth-f)/2+"px";g.style.top=(Viewer.SlideHeight-c)/2+"px";g.style.width=f+"px";g.style.height=c+"px";g.style.zIndex=9999;var e=Viewer._WaterMark_.bitmapData;e.className="content";e.setAttribute("width",f+"px");e.setAttribute("height",c+"px");g.appendChild(e);var d=document.getElementById("imageCanvas");d.appendChild(g)}}};return a});