define("CAudioPlayer",function(){function a(b){this.audioAsset=b;this.audioDisplay=b.soundData;this.sSource;this.bAutoPlay;this.bControlBarVisible;this.bCantMoveForward;this.nMaxPlayTime=0;this.iPlayType=2;this.iLoop=0;this.bFullScreenClicked=false;this.sInitState="";this.iInitStartTime=-1;this.nInitVolume=0.5;this.bIsDragging;this.timer=null;this.soundAsset=null;this.soundChannel=null;this.soundPos=0;this.playing=false;this.bLoop=false;this.iLength;this.bIsDragging}a.prototype={SetSound:function(e,d,b,c){this.soundAsset=e;this.soundChannel=d;this.bLoop=b;this.iLength=c},SetPlaying:function(b){this.playing=b},getplaying:function(){return this.playing},setLoop:function(b){this.iLoop=b},setPlayType:function(b){this.iPlayType=b},setSource:function(b){this.sSource=b},setAutoPlay:function(b){this.bAutoPlay=b},setControlBarVisible:function(b){this.bControlBarVisible=b},GetPlayheadTime:function(){return this.audioDisplay.currentTime},setPlayheadTime:function(b){if(this.audioDisplay.currentSrc){if(this.audioDisplay.currentTime){this.audioDisplay.currentTime=b}}else{this.iInitStartTime=b}},setVolume:function(b){this.audioDisplay.volume=b;if(!this.audioDisplay.currentSrc){this.nInitVolume=b}},OnCreationComplete:function(){this.audioDisplay.autoPlay=this.bAutoPlay;if(this.bAutoPlay==false){this.audioDisplay.pause()}this.divDisplay=document.createElement("div");this.divDisplay.className="item sound";this.divDisplay.style.left=this.x+"px";this.divDisplay.style.top=this.y+"px";this.divDisplay.style.width=this.width+"px";this.divDisplay.style.height=this.height+"px";this.audioDisplay.style.width=this.width+"px";this.audioDisplay.style.height=this.height+"px";this.zIndex=document.getElementById("imageCanvas").querySelectorAll(".item.sound").length||0;this.divDisplay.style.zIndex=this.zIndex+20000;this.divDisplay.appendChild(this.audioDisplay);if(this.width<=0||this.height<=0){this.divDisplay.style.display="none"}switch(this.sInitState){case"Play":this.Play();break;case"Pause":this.Pause();break;case"Stop":this.Stop();break;case"Close":this.Close();return}if(this.iInitStartTime>-1){this.setPlayheadTime(this.iInitStartTime)}this.setVolume(this.nInitVolume)},Play:function(){if(this.audioDisplay.currentSrc){this.audioDisplay.play()}else{this.sInitState="Play"}},Stop:function(){if(this.audioDisplay.currentSrc){this.audioDisplay.pause()}else{this.sInitState="Stop"}},Pause:function(){if(this.audioDisplay.currentSrc){this.audioDisplay.pause()}else{this.sInitState="Pause"}},Close:function(){if(this.audioDisplay&&this.audioDisplay.currentSrc){this.audioDisplay.pause();if(this.audioDisplay.currentTime){this.audioDisplay.currentTime=0}}else{this.sInitState="Close"}},Renew:function(){this.audioAsset.renew()}};return a});