define("CMasterInfo",["CStopTypeAfterNSec","Timer","MyEventDispatcher","CAssertUtil"],function(b,d,a,e){function c(g,f){this.sMasterName=g;this.script=f;this.timer=d.New();this.timer.addEventListener(this.timerHandler);this.myEvent=a.getInstance()}c.prototype={iIndexScript:0,EqualsMasterName:function(f){return(this.sMasterName==f)},GetScriptIndex:function(){return this.iIndexScript},GetScript:function(g){e.IsTrue(g<this.ScriptCount());var f=this.arrayScript[g];e.IsNotNull(f);return f},ScriptCount:function(){return this.arrayScript.length||0},Run:function(f,h){if(this.timer.running){return}var g=false;if(f&&h){g=true}if(f==undefined){f=0}if(h==undefined){h=0}this.script.Run(f,h);this.arrayScript=this.script.arrayScripts||[];this.iIndexScript=0;this.Display(g)},Stop:function(){this.timer.stop();iIndexScript=0},Display:function(i){while(this.iIndexScript<this.ScriptCount()){var g=this.GetScript(this.iIndexScript++);if(g.sID&&i==false){if((!g.bInvisible)&&main.Exist(g.sID)){if(g.iInTime){if(g.iInTime<=0){main.Delete(g.sID)}}else{main.Delete(g.sID)}}}g.Run();var f;if(g.arrayScripts&&g.arrayScripts.length>0){new c("",g).Run(g.x,g.y);f=g.arrayScripts[g.arrayScripts.length-1].StopType()}else{f=g.StopType()}if(null!=f){var h;this.timer.me=this;if(f instanceof b){h=f.nTime;this.timer.delay=h;this.timer.start()}return}}main.bRunMaster=false},timerHandler:function(g){var f=g.me;if(f.myEvent.AnimationStatus=="incomplete"){return}else{if(f.myEvent.ButtonStatus){f.myEvent.ButtonStatus=false;this.stop();main.Continue();return}}this.stop();f.Display()}};return c});