define("Timer",function(){function a(b){this.name=b}a.prototype={name:null,delay:0,callback:null,timerId:null,currentCount:0,repeatCount:0,running:false,start:function(){this.timerId=setInterval("Timer.TimerCallBack('"+this.name+"')",this.delay);this.running=true},stop:function(){this.running=false;if(this.timerId){clearInterval(this.timerId);this.currentCount=0;this.delay=0}},reset:function(){this.stop()},addEventListener:function(b){this.callback=b},removeEventListener:function(){this.callback=null},getTimer:function(){return this.currentCount*this.delay}};Timer={timerId:0,New:function(c,f,e){if(!Timer.List){Timer.List=new Array()}var b=this.timerId;this.timerId++;var d=new a(b);d.delay=c;d.addEventListener(f);Timer.List[Timer.List.length]=d;return d},Find:function(b){for(var c=0;c<Timer.List.length;++c){if(Timer.List[c].name==b){return Timer.List[c]}}return null},TimerCallBack:function(b){timer=Timer.Find(b);if(timer&&timer.callback!=null){if(timer.bStop){timer.stop();return false}if(timer.repeatCount){timer.repeatCount--;if(timer.repeatCount==0){timer.bStop=true}}timer.callback(timer);timer.currentCount++}},Remove:function(b){Timer.Find(b);return null}};return Timer});