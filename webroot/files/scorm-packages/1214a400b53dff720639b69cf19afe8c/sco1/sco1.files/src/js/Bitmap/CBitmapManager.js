define("CBitmapManager",["CBitmapInfo","CArrayUtil","Rectangle"],function(d,c,b){function a(){this.arrayBitmapGetPut=[];this.arrayBitmapWindow=[];this.arrayBitmapButton=[];this.arrayBitmapClose=[];this.arrayBitmapShow=[];this.arrayBitmapSync=[]}a.prototype={SlideStart:function(){this.arrayBitmapGetPut=[];this.arrayBitmapGetPut=[];this.arrayBitmapWindow=[];this.arrayBitmapButton=[];this.arrayBitmapClose=[];this.arrayBitmapShow=[];this.arrayBitmapSync=[]},FindGetNo:function(e){var g;for(var f=0;f<this.arrayBitmapGetPut.length;f++){g=this.arrayBitmapGetPut[f];if(g.GetSID()==e){return g.GetID()}}return -1},IsExist:function(g){var f;for(var e=0;e<this.arrayBitmapGetPut.length;e++){f=this.arrayBitmapGetPut[e];if(f.GetID()==g){return e}}return -1},GetFreeGetNo:function(){var f;var g;for(var h=0;;h++){f=false;for(var e=0;e<this.arrayBitmapGetPut.length;e++){g=this.arrayBitmapGetPut[e];if(g.GetID()==h){f=true;break}}if(!f){return h}}return -1},AddBitmapGetPut:function(g,k,i,f,e,j){var l=new b(k,i,f,e);var m=main.GetBitmapData(l);var h;h=this.IsExist(g);if(h>=0){this.arrayBitmapGetPut.splice(h,1)}this.arrayBitmapGetPut.push(new d(g,l,m,j))},GetBitmapGetPut:function(g){var f;for(var e=0;e<this.arrayBitmapGetPut.length;e++){f=this.arrayBitmapGetPut[e];if(f.GetID()==g){return f.GetBitmapData()}}return null},GetBitmapInfo:function(g){var f;for(var e=0;e<this.arrayBitmapGetPut.length;e++){f=this.arrayBitmapGetPut[e];if(f.GetID()==g){return f}}return null},AddBitmapWindow:function(e,k,h,j){var f=new b(e,k,h,j);var g=main.GetBitmapData(f);var i=this.arrayBitmapWindow.length;this.arrayBitmapWindow.push(new d(i,f,g,""))},RemoveBitmapWindow:function(){this.arrayBitmapWindow.pop()},GetBitmapWindow:function(){var e;if(this.arrayBitmapWindow.length>0){e=this.arrayBitmapWindow[this.arrayBitmapWindow.length-1];return e.GetBitmapData()}return null},GetBitmapWindowInfo:function(){var e;if(this.arrayBitmapWindow.length>0){e=this.arrayBitmapWindow[this.arrayBitmapWindow.length-1];return e}return null},AddBitmapButton:function(e){var f=main.GetBitmapData(e);var g=this.arrayBitmapButton.length;this.arrayBitmapButton.push(new d(g,e,f,""));return g},RestoreBitmapButton:function(f){if(this.arrayBitmapButton.length>0){for(var e=0;e<imageCanvas.childElementCount;++e){var g=imageCanvas.childNodes[e];if(g.className.indexOf(f.iButtonNo)>-1){imageCanvas.removeChild(g)}}}},FindCloseInfo:function(e){var g;for(var f=0;f<this.arrayBitmapClose.length;f++){g=this.arrayBitmapClose[f];if(g.sID()==e){return g}}return null},FindCloseNo:function(e){var g;for(var f=0;f<this.arrayBitmapClose.length;f++){g=this.arrayBitmapClose[f];if(g.sID()==e){return f}}return -1},FindShowNo:function(e){var g;for(var f=0;f<this.arrayBitmapShow.length;f++){g=this.arrayBitmapShow[f];if(g.sID()==e){return f}}return -1},AddBitmapClose:function(g,j,e,f){f=f||"";var i=new b(g.x,g.y,g.width,g.height);if(i.width==0){i.width=1}if(i.height==0){i.height=1}var h=main.GetBitmapData(i);this.arrayBitmapClose.push(new d(j,i,h,e,f))},GetCloseCommandID:function(e){var f=FindCloseNo(e);var g;if(f>=0){g=this.arrayBitmapClose[f];return g.GetCommandID()}return""},GetCloseCommandName:function(e){if(e){if(e.className.indexOf("item image shape")!=-1&&e.style.zIndex>=10000){return"BUTTONSET"}else{if(e.className.indexOf("item video")!=-1){return"VIDEOOPEN"}else{if(e.className.indexOf("item list")!=-1){return"MENUBUTTON"}else{if(e.className.indexOf("item image eboard")!=-1){return"EBOARD"}else{if(e.className.indexOf("quiz sbjt")!=-1){return"QUIZ_SUBJECTIVE"}else{if(e.className.indexOf("quiz objt")!=-1){return"QUIZ_OBJECTIVE"}else{if(e.className.indexOf("item image shape browser")!=-1){return"BROWSER"}}}}}}}}return""},RestoreBitmapClose:function(j,n){var g=FindCloseNo(j);if(g>=0){var i=this.arrayBitmapClose[g];var l,k,m,f;if(n==false){l=i.Rect.x;k=i.Rect.y;m=i.Rect.width;f=i.Rect.height;g=FindShowNo(j);if(g==-1){AddBitmapShow(i.Rect,-1,j)}main.Draw(CUIComponentFactory.DrawBitmap(i.GetBitmapData(),l,k,m,f))}else{g=FindShowNo(j);if(g>=0){var e;e=this.arrayBitmapShow[g];l=e.Rect.x;k=e.Rect.y;m=e.Rect.width;f=e.Rect.height;main.Draw(CUIComponentFactory.DrawBitmap(e.GetBitmapData(),l,k,m,f))}}}},AddBitmapShow:function(g,i,e,f){f=f||"";var h=main.GetBitmapData(g);this.arrayBitmapShow.push(new d(i,g,h,e,f))},AddBitmapSync:function(g,h,e,f){f=f||"";var j=new b(g.x,g.y,g.width,g.height);if(j.width==0){j.width=1}if(j.height==0){j.height=1}var i=main.GetBitmapData(j);this.arrayBitmapSync.push(new d(h,j,i,e,f))},FindSyncIndex:function(f){var g;for(var e=0;e<this.arrayBitmapSync.length;e++){g=this.arrayBitmapSync[e];if(g.GetID()==f){return e}}return -1},RestoreBitmapSync:function(l,g){g=g||true;var j=FindSyncIndex(l);if(j>=0){var k=this.arrayBitmapSync[j];var e=k.Rect.x;var m=k.Rect.y;var f=k.Rect.width;var i=k.Rect.height;main.Draw(CUIComponentFactory.DrawBitmap(k.GetBitmapData(),e,m,f,i))}},AddBitmapTemp:function(h,e,i,f,g){}};return a});