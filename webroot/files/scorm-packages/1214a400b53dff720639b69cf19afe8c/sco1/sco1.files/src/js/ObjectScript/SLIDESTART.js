define("SLIDESTART",["CScript","CStopTypeInfiniteLoop","CTextFormatUtil","Rectangle","BitmapAsset","Transition","Timer","Shape"],function(a,c,i,h,e,d,g,b){function f(z,u,G,n,x,y,p,o,r,v,F,l,B,s,q,w,A,k,E,C,D,j,t,m){this.sSlideName=z;this.ColorScreen=u==0?0:u||16777215;this.object=G||null;this.backEffectMacro=n||"";this.iInitType=x||-1;this.iButtonType=y||0;this.iButtonX=p||-1;this.iButtonY=o||-1;this.iButtonW=r||30;this.iButtonH=v||20;this.sGradationMacro=F||"";this.BackSound=l||null;this.iBackSoundStop=B||0;this.sMasterName=s||"";this.iPopUpMenu=q||2;this.buttonBitmapAsset=w||null;this.EffectMacro=A||"";this.sSCOName=k||"";this.iRTL=p==-3?1:E;this.iDisplaySlideNo=C||0;this.sFontMacro=D||"";this.bSyncObject=j||0;this.iStartTime=t||0;this.iEndTime=m||-1;this.format=i.parseFontMacro(this.sFontMacro)}f.prototype=new a();f.prototype.SlideName=function(){return this.sSlideName};f.prototype.StopType=function(){if(typeof this.object=="string"){return new c()}return null};f.prototype.onLoadComplete=function(k){var j=this.me;j.backBitmapAsset=this;if(main.GetCurrentSlideNo()==j.iCurrentSlideNo){j.Display();j.Resume()}};f.prototype.onLoadError=function(k){var j=this.me;j.Resume()};f.prototype.Run=function(j){$("#imageCanvas").removeClass("unhideable");main.StopMaster();d.stopAnimation();j=j||false;main.nSlideSyncObject=this.bSyncObject;main.nSlideStartTimeStart=this.iStartTime;main.nSlideStartTimeEnd=this.iEndTime;if(typeof this.object=="string"){this.iCurrentSlideNo=main.GetCurrentSlideNo();this.Image=document.createElement("img");this.Image.me=this;this.Image.onload=this.onLoadComplete;this.Image.src=this.object}else{if(this.object instanceof e){this.backBitmapAsset=this.object.bitmapData}this.Display()}if(this.iPopUpMenu<2){main.addContextMenu(this.iPopUpMenu)}};f.prototype.Display=function(){var k=main.nCurrentSlideNo;main.nCurrentSlideNo=main.GetCurrentSlideNo();main.visitArray[main.nCurrentSlideNo-1]|=1;if(main.nCurrentSlideNo>main.nMaxViewSlideNo){main.nMaxViewSlideNo=main.nCurrentSlideNo}if(main.bPageTracking){}main.bBackgroundSlide=false;main.SlideStart(this.sSlideName,this.ColorScreen);if(this.ColorScreen!=16777215&&this.ColorScreen!=-1){main.bBackgroundSlide=true}main.bAutoJump=false;main.nNaviButton=0;main.ClearDraw();main.contextMenu.Hide();if(this.backBitmapAsset){var j=document.getElementById("imageCanvas");j.style.backgroundImage="url("+this.backBitmapAsset.src+")";j.style.backgroundSize="cover";main.bBackgroundSlide=true}main.RunMaster(this.sMasterName);main.RedrawButtonAll();if(this.iButtonType!=0){this.NavigationButton()}main.nSlideStartTime=main.getTimer();if(this.bSyncObject){if(!main.bSyncObjectTimer){main.ObjectSyncManager().SetTimer()}}};f.prototype.EqualsSlideName=function(j){return(this.sSlideName==j)};f.prototype.PushSlideNameToArray=function(j){j.push(this.sSlideName)};f.prototype.NavigationButton=function(){var u,s;var z,v;var J,I;var P=4;var D=0;var B=0;if(this.iDisplaySlideNo){var C=main.GetSlideCount();D=i.GetSlideNumberWidth(C,this.format,this.iButtonW)}for(J=0;J<=5;J++){I=1<<J;if(this.iButtonType&I){B++}}if(this.iButtonX==-1||this.iButtonY==-1||this.iButtonX==-2||this.iButtonY==-2||this.iButtonX==-3||this.iButtonY==-3){var w=(this.iButtonX==-1||this.iButtonY==-1)?10:30;var t=(this.iButtonX==-1||this.iButtonY==-1)?10:14;if(this.iDisplaySlideNo){if(B==0&&this.iButtonW==0){this.iButtonW=80;this.iButtonH=20}}if(this.iButtonX==-3){z=w}else{z=Viewer.SlideWidth-B*(this.iButtonW+P)-w+P-D-P}v=Viewer.SlideHeight-this.iButtonH-t;u=z;s=v}else{u=this.iButtonX;s=this.iButtonY}if(this.iSyncObject){var n=new h(u,s,(this.iButtonW+P)*B+D,this.iButtonH);main.AddBitmapSync(n,this.iIndex,"")}var K=new h(u,s-((Number(this.format.size)-this.iButtonH)/2),D,Number(this.format.size));J=this.iRTL?5:0;while(1){if(this.iRTL){if(J<0){break}}else{if(J>5){break}}I=1<<J;if(this.iButtonType&I){var r=(this.buttonBitmapAsset.width||this.buttonBitmapAsset.bitmapData.width||this.buttonBitmapAsset.bitmapData.naturalWidth)/6;var F=(this.buttonBitmapAsset.height||this.buttonBitmapAsset.bitmapData.height||this.buttonBitmapAsset.bitmapData.naturalHeight)/3;var Q=new h(u,s,this.iButtonW,this.iButtonH);var M=[4,2,3,5,7,16];var o=Capabilities.Message(Capabilities.Langueges.NaviButtonTooltip);var p=new Array(3);for(var H=0;H<3;H++){p[H]=document.createElement("canvas");p[H].setAttribute("width",r+"px");p[H].setAttribute("height",F+"px");p[H].getContext("2d").drawImage(this.buttonBitmapAsset.bitmapData,J*r,F*H,r,F,0,0,r,F)}var L=p[0],R=p[1],O=p[2];main.AddButton(J+80000+main.nNaviButton*6,"",Q,L,R,O,2,"",M[J],o[J],"",null,0,null,-1,-1,-1,-1,-1,-1,-1,"");var q=main.GetButtonInfo(J+80000+main.nNaviButton*6);q.DrawOut();u+=this.iButtonW+P}if(this.iDisplaySlideNo){if((this.iRTL&&(J==2))||(!this.iRTL&&(J==1))){K.x=u;K.y=s-((Number(this.format.size)-this.iButtonH)/2);K.width=D;K.height=Number(this.format.size);u+=D+P}}if(this.iRTL){J--}else{J++}}if(this.iButtonType){main.nNaviButton++}if(this.iDisplaySlideNo){var N=K.height;if(Number(this.format.size)>N){K.y-=(Number(this.format.size)-N)/2;K.bottom+=(Number(this.format.size)-N)/2}var G="";var A;var m;A=main.GetCurrentSlideNo();m=main.GetSlideCount();G=A.toString()+"/"+m.toString();var l=new b(K.x,K.y,K.width,K.height);l.setID("portion");l.divShape.style.zIndex=80000;var E=new h(-1,0,K.width,K.height);CUIComponentFactory.Text(l,G,E,this.format);main.Draw(l)}};return f});