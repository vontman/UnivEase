define("CObjectSyncManager",["CObjectSyncInfo","Timer","SOUND"],function(a,b,c){function d(){this.arrayObjectSyncInfo=[];this.compleated=0}d.prototype={timer:null,main:null,SlideStart:function(){this.arrayObjectSyncInfo=[];this.compleated=0;if(this.timer){this.timer.stop()}if(Viewer.isAnApp){window.ABridge.cancelNGo("bSyncObject")}main.bSyncObjectTimer=false},AddObjectSync:function(h,f,j,k,e,g,i){k=k||-1;e=e||Number.MAX_VALUE;g=g||-1;this.arrayObjectSyncInfo.push(new a(h,f,j,k,e,g,i));this.SetTimer()},SetTimer:function(){if(this.arrayObjectSyncInfo.length==0){return}if(!main.bSyncObjectTimer){this.timer=b.New(100);this.timer.me=this;this.timer.addEventListener(this.onTimer);if(Viewer.isAnApp){window.ABridge.loopNGo("bSyncObject","main.objectSyncManager.onTimer()",1000)}else{this.timer.start()}main.bSyncObjectTimer=true}},StopTimer:function(){if(this.timer){this.timer.stop()}if(Viewer.isAnApp){window.ABridge.cancelNGo("bSyncObject")}main.bSyncObjectTimer=false},onTimer:function(m){var p=Viewer.isAnApp?this:this.me;if(p.compleated>=p.arrayObjectSyncInfo.length){p.StopTimer()}var n=main.bitmapManager;var s;s=main.GetCurrentSyncObjectTime();if(main.nSlideSyncObject&&main.nSlideStartTimeEnd!=-1){if(s>=main.nSlideStartTimeEnd){main.GotoSlideStartNext();return}}for(var j=p.arrayObjectSyncInfo.length-1;j>=0;j--){var r=p.arrayObjectSyncInfo[j];if(r.bIn&&(s<r.iInTime||s>=r.iOutTime)){if(r.sID==""){r.bIn=false;continue}var g=r.sID;var q=document.getElementsByClassName("item "+g);var v=false;for(var j=0;j<q.length;j++){var f=r.sCommandID;var u;switch(f){case"BROWSER":u=main.FindBrowserNo(g);var t=main.BrowserManager().GetBrowserInfo(u);main.BrowserManager().Remove(u);break;case"QUIZ_SUBJECTIVE":if(q[j]&&main.Contains(q[j])){main.Clear(q[j]);j--}break;case"QUIZ_OBJECTIVE":if(!v){u=main.quizManager.FindQuizIndex(g);main.mouseManager.SetEnableQuiz(false,u);var h=main.quizManager.GetPassed(u);main.quizManager.SetOldPassed(u,h);if(h==-1){main.quizManager.SetPassed(u,0)}}v=true;if(q[j]&&main.Contains(q[j])){main.Clear(q[j]);j--}break;case"EBOARD":u=main.FindEBoardNo(g);var k=main.FindEBoard(u);k.Hide(false);if(q[j]&&main.Contains(q[j])){main.Clear(q[j])}break;case"MENUBUTTON":u=main.ControlManager().FindControlNo(g);var l=main.ControlManager().GetControlInfo(u);l.Hide();break;case"VIDEOOPEN":u=main.FindVideoNo(g);main.VideoDelete(u);if(q[j]&&main.Contains(q[j])){main.Clear(q[j])}break;default:if(q[j]&&main.Contains(q[j])){main.Clear(q[j]);j--}if(f=="BUTTONSET"){var o=main.MouseManager().FindButtonNo(g);main.SetEnable(o,false)}break}}r.bIn=false}}for(j=0;j<p.arrayObjectSyncInfo.length;j++){r=p.arrayObjectSyncInfo[j];if(!r.bIn&&r.iInTime<=s&&s<r.iOutTime){r.bIn=true;if(r.sMasterName){main.MasterManager().GetScript(r.iIndex-1,r.sMasterName).Run(true)}else{main.ScriptManager().GetScript(r.iIndex-1).Run(true)}p.compleated++}}}};return d});